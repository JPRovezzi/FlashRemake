<!DOCTYPE html>
<html>
<body>

<!--Title-->
<h1 style="text-align: center;">"Flash-Calc"</h1>

<!--Problem-->
<p>Problem name:</p>
<input type="text"  id="problem_name" name="name" value="llecalas2">
<p>Data input:</p>
<!--
<code>
    <label for="OS">
        OS:      
    </label>
    <select name="OS" id="OS"> 
        <option value="Linux_Ubuntu">
            Linux (Ubuntu)
        </option> 
        <option value="Windows">
            Windows
        </option>
    </select> 

    <br> 

    <label for="Model">
        Model:
    </label> 
    <select name="Model" id="model"> 
        <option value="UNIFAC">
            UNIFAC
        </option> 
        <option value="A-UNIFAC">
            A-UNIFAC
        </option> 
    </select>
    
    <br> 

    <label for="Parameters_table">
        Parameters table:
    </label> 
    <select name="Parameters_table" id="par_table"> 
        <option value="1">
            Liquid-Liquid
        </option> 
        <option value="2">
            Vapor-Liquid
        </option> 
        <option value="3">
            Infinity dil.
        </option> 
    </select>
    <br>
    <button id="set_par_table" onclick = "msgprint()">Set</button>

   
    <form>
        <input type = "button" onclick = ""
    </form>
 
    

    <br>
    Number of components:
    <input type="text"  id="name" name="name" value="0">
    
</code>
-->
<div id="os">
    OS:
</div>
<div id="model">
    Model:
</div>
<div id="par_table">
    Parameters table:
</div>
<br>
<div id="showdatainput">
</div>
<br>
<div id="wrapper">
    Number of components:
</div>
<br>
<div id="div_download">
</div>

<script>
//#region Borrar    
// Get the elements from the document
//var os          = document.getElementById("number");
//var create          = document.getElementById("create");
//var container       = document.getElementById("container");
//var par_table       = document.getElementById("par_table");
//#endregion
/*
createbutton.onclick("click", () => {
  // Clear the container element
  container.innerHTML = "";
  // Get the number of selection boxes to create
  //var n = parseInt(number.value);
  var par_table_value = parseInt(par_table.value);
  // Define some sample options for the selection boxes
  if (par_table_value == 1){
    var options = ["None",
    "(CH3)",
    "(CH2)",
    "(CH)",
    "(C)",
    "(CH2=CH)",
    "(CH=CH)",
    "(CH=C)",
    "(CH2=C)",
    "(ACH)",
    "(AC)",
    "(ACCH3)",
    "(ACCH2)",
    "(ACCH)",
    "(OH)",
    "(P1)",
    "(P2)",
    "(H2O)",
    "(ACOH)",
    "(CH3CO)",
    "(CH2CO)",
    "(CHO)",
    "(FURF)",
    "(COOH)",
    "(HCOOH)",
    "(CH3COO)",
    "(CH2COO)",
    "(CH3O)",
    "(CH2O)",
    "(CH-O)",
    "(FCH2O)",
    "(CH2CL)",
    "(CHCL)",
    "(CCL)",
    "(CH2CL2)",
    "(CHCL2)",
    "(CCL2)",
    "(CHCL3)",
    "(CCL3)",
    "(CCL4)",
    "(ACCL)",
    "(CH3CN)",
    "(CH2CN)",
    "(ACNH2)",
    "(CH3NO2)",
    "(CH2NO2)",
    "(CHNO2)",
    "(ACNO2)",
    "(CH2OH)2",
    "(DEOH)",
    "(C5H5N)",
    "(C5H4N)",
    "(C5H3N)",
    "(TCLE)",
    "(MFA)",
    "(DMFA)",
    "(TMS)",
    "(ME2SO)"
    ];
    } else if(par_table_value == 2){
        var options = ["None",
        "(CH3)",
        "(CH2)",
        "(CH)",
        "(C)",
        "(CH2=CH)",
        "(CH=CH)",
        "(CH2=C)",
        "(CH=C)",
        "(C=C)",
        "(ACH)",
        "(AC)",
        "(ACCH3)",
        "(ACCH2)",
        "(ACCH)",
        "(OH)",
        "(CH3OH)",
        "(H2O)",
        "(ACOH)",
        "(CH3CO)",
        "(CH2CO)",
        "(CHO)",
        "(CH3COO)",
        "(CH2COO)",
        "(HCOO)",
        "(CH3O)",
        "(CH2O)",
        "(CH-O)",
        "(FCH2O)",
        "(CH3NH2)",
        "(CH2NH2)",
        "(CHNH2)",
        "(CH3NH)",
        "(CH2NH)",
        "(CHNH)",
        "(CH3N)",
        "(CH2N)",
        "(ACNH2)",
        "(C5H5N)",
        "(C5H4N)",
        "(C5H3N)",
        "(CH3CN)",
        "(CH2CN)",
        "(COOH)",
        "(HCOOH)",
        "(CH2CL)",
        "(CHCL)",
        "(CCL)",
        "(CH2CL2)",
        "(CHCL2)",
        "(CCL2)",
        "(CHCL3)",
        "(CCL3)",
        "(CCL4)",
        "(ACCL)",
        "(CH3NO2)",
        "(CH2NO2)",
        "(CHNO2)",
        "(ACNO2)",
        "(CS2)",
        "(CH3SH)",
        "(CH2SH)",
        "(FURF)",
        "(CH2OH)2",
        "(I)",
        "(BR)",
        "(CH=-C)",
        "(C=-C)",
        "(ME2SO)",
        "(ACRY)",
        "CL-C=C)",
        "(ACF)",
        "(DMFA)",
        "(DMF-2)",
        "(CF3)",
        "(CF2)",
        "(CF)",
        "(COO)",
        "(SIH3)",
        "(SIH2)",
        "(SIH)",
        "(SI)",
        "(SIH2O)",
        "(SIHO)",
        "(SIO)"
    ]
    } else
    var options = ["Empty"] 
});
*/


//#region Get the problem name element.
//#endregion

//#region Get the os element for the os selection box.
var os = document.getElementById("os");
var os_box = document.createElement("select");
os_box.className = "os_box";
var os_option = document.createElement("option");
    os_option.value = "linux_ubuntu";
    os_option.text = "Linux_Ubuntu";
    os_box.appendChild(os_option);
var os_option = document.createElement("option");
    os_option.value = "windows";
    os_option.text = "Windows";

os_box.appendChild(os_option);
os.appendChild(os_box);

//#endregion

//#region Get the model element for the model selection box.
var model = document.getElementById("model");
var model_box = document.createElement("select");
model_box.className = "model_box";
var model_option = document.createElement("option");
    model_option.value = "0";
    model_option.text = "UNIFAC";
    model_box.appendChild(model_option);
var model_option = document.createElement("option");
    model_option.value = "1";
    model_option.text = "A-UNIFAC";

model_box.appendChild(model_option);
model.appendChild(model_box);
//#endregion

//#region Set a button to print the data input
var showdatainput = document.getElementById("showdatainput");
var showdatainputButton = document.createElement("input");
showdatainputButton.id = "showdatainput";
showdatainputButton.type = "button";
showdatainputButton.value = "Save";
showdatainput.appendChild(showdatainputButton);
showdatainputButton.onclick = ()=> {
    var os_sel = os_box.options[os_box.selectedIndex].text
    var model_sel = model_box.options[model_box.selectedIndex].text
    alert("Saved problem data and configuration:\n\n"+
    "#-PROBLEM-NAME:".padEnd(23,"_")        + "os_sel"  + "\n" +
    "#-OPERATING-SYSTEM:".padEnd(24,"_")    + os_sel    + "\n" +
    "#-MODEL:".padEnd(25,"_")               + model_sel + "\n" +
    "#-PARAMETERS-TABLE:".padEnd(24,"_")    + model_sel + "\n"
    );    
};

//#endregion

//#region Get the wrapper element for the input boxes
var wrapper = document.getElementById("wrapper");
var div_download = document.getElementById("div_download");

// Create an input box for n_components
var nInput = document.createElement("input");
nInput.id = "nInput";
nInput.type = "number";
nInput.min = "2";
nInput.max = "10";
nInput.value = "2";
wrapper.appendChild(nInput);

// Create a set button
var setButton = document.createElement("input");
setButton.id = "setButton";
setButton.type = "button";
setButton.value = "Create table";
wrapper.appendChild(setButton);

// Add an onclick event listener to setButton
setButton.onclick = () => {
  // Get the selected value of n_maxgroups and n_components
  var n_components = nInput.value;
  var n_maxgroups = 10; // Number of functional groups
  
  // Remove any existing selection boxes or lines for each n_components line
  var boxes = document.getElementsByClassName("box");
  while (boxes.length > 0) {
    boxes[0].remove();
  }
  var line = document.getElementsByClassName("line");
  while (line.length > 0) {
    line[0].remove();
  }
  
  // Create n_maxgroups selection boxes for each n_components line
  for (var i = 0; i < n_components; i++) {
    // Create a container element for each n_components line
    var line = document.createElement("div");
    line.className = "line";
    wrapper.appendChild(line);
    
    // Create a label for each Component line
    var label = document.createElement("span");
    label.textContent = "Component " + (i + 1) + ": ";
    line.appendChild(label);
    
    // Create n_maxgroups selection boxes for each line
    for (var j = 0; j < n_maxgroups; j++) {
      // Create a selection box
      var box = document.createElement("select");
      box.className = "box";
      
      // Add some dummy options for each box
      for (var k = 0; k < 5; k++) {
        var option = document.createElement("option");
        option.value = k;
        option.text = "Option " + (k + 1);
        box.appendChild(option);
      }
      
      // Append the box to the line
      line.appendChild(box);
    }
        // Create a container element for each line
    var line = document.createElement("div");
    line.className = "line";
    wrapper.appendChild(line);
    
    // Create a label for each Component line
    var label = document.createElement("span");
    label.textContent = "_".repeat(12);
    line.appendChild(label);
    for (var j = 0; j < n_maxgroups; j++) {
      // Create a selection box
      var ngroup_Input = document.createElement("input");
      ngroup_Input.id = "ngroup_Input";
      ngroup_Input.className = "input"
      ngroup_Input.type = "number";
      ngroup_Input.min = "0";
      ngroup_Input.max = "1000";
      ngroup_Input.value = "0";
      
      
          
      // Append the box to the line
      line.appendChild(ngroup_Input);
    }
  }
};
//#endregion

//#region Create a download button
var downloadButton = document.createElement("input");
downloadButton.id = "downloadButton";
downloadButton.type = "button";
downloadButton.value = "Download";
div_download.appendChild(downloadButton);
// Add an onclick event listener to downloadButton
downloadButton.onclick = () => {
  // Get all the input and selection values
  var values = [];
  values.push("Number of components: " + nInput.value);
  
  var lines = document.getElementsByClassName("line");
  for (var i = 0; i < lines.length; i++) {
    var lineValues = [];
    var boxes = lines[i].getElementsByClassName("box");
    var inputs = lines[i].getElementsByClassName("input");
    for (var j = 0; j < boxes.length; j++) {
      lineValues.push(boxes[j].value);
    }
    for (var j = 0; j < inputs.length; j++) {
      lineValues.push(inputs[j].value);
    }
    if (i % 2 == 0)
    values.push("Component " + ((i/2)+1) + ":, " + lineValues.join(", "));
    else
    values.push("Component " + ((i+1)/2) + ":, " + lineValues.join(", "));
  }
  values.push("0,0") //Print end of file
  /*
  */
  // Create a text file from the values
  var textFileAsBlob = new Blob([values.join("\n")], {type: 'text/plain'});
  
  // Create a link element to download the file
  var downloadLink = document.createElement("a");
  downloadLink.download = "values.txt";
  
  // Use createObjectURL to create a URL for the file
  downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
  
  // Click the link to download the file
  downloadLink.click();
};
//#endregion
</script>


<br>
<br>
<br>
<p>Comments:</p> 
<textarea id="comment" name="comment" rows="4" cols="50">
</textarea>

</body>
</html>